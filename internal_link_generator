<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internal Link Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Archivo', sans-serif;
            padding: 20px;
            max-width: 1000px;
            margin: auto;
            background-color: #ffe0eb; /* Light pink background */
            color: #333;
        }
        h1 {
            color: #6A1F8D; /* Deep Violet/Plum color */
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        textarea {
            width: 100%;
            height: 150px;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ffabab;
            border-radius: 8px;
            box-sizing: border-box;
            font-family: 'Archivo', sans-serif;
            font-size: 16px;
        }
        button {
            padding: 12px 25px;
            margin-right: 10px;
            border: none;
            border-radius: 25px; /* Rounded edges for buttons */
            cursor: pointer;
            font-weight: bold;
            font-family: 'Archivo', sans-serif;
            font-size: 16px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        #generateBtn {
            background-color: #ff69b4; /* Pink color */
            color: white;
        }
        #generateBtn:hover {
            background-color: #e65a9e;
            transform: translateY(-2px);
        }
        #copyCsvBtn {
            background-color: #9c27b0; /* Purple color */
            color: white;
            display: none;
        }
        #copyCsvBtn:hover {
            background-color: #7b1fa2;
            transform: translateY(-2px);
        }
        .section-header {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #555;
            font-weight: bold;
        }
        #results {
            margin-top: 30px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            /* Key setting for column width control */
            table-layout: fixed; 
        }
        th, td {
            padding: 12px;
            border: 1px solid #f0f0f0;
            text-align: left;
            font-size: 14px;
            word-wrap: break-word;
        }
        th {
            background-color: #fce4ec;
            font-weight: bold;
            color: #555;
        }
        
        /* Column Width Definitions for Readability */
        #resultsTable th:nth-child(1), #resultsTable td:nth-child(1) { width: 30%; } /* Source URL */
        #resultsTable th:nth-child(2), #resultsTable td:nth-child(2) { width: 30%; } /* Target URL */
        #resultsTable th:nth-child(3), #resultsTable td:nth-child(3) { width: 20%; } /* Anchor Text */
        #resultsTable th:nth-child(4), #resultsTable td:nth-child(4) { width: 20%; } /* Link HTML */

        .message {
            margin-top: 20px;
            padding: 12px;
            background-color: #fff3e0;
            border: 1px solid #ffcc80;
            border-radius: 8px;
            color: #333;
            display: none;
            font-size: 15px;
        }
        p {
            line-height: 1.6;
        }
    </style>
</head>
<body>

    <h1>ðŸ”— Internal Link Generator ðŸš€</h1>
    <p>Paste your list of URLs below, with one URL per line. The tool will generate all possible bidirectional internal links between them, ready for your SEO strategy!</p>

    <textarea id="urlInput" placeholder="e.g.,
https://example.com/topic-a-guide
https://example.com/blog-post-on-topic-b
https://example.com/service-page-c"></textarea>

    <button id="generateBtn" onclick="generateLinks()">Generate Links</button>
    <button id="copyCsvBtn" onclick="copyCsv()">Copy CSV Data</button>

    <div id="statusMessage" class="message"></div>
    
    <div id="results">
        <h2 class="section-header">Generated Links</h2>
        <table id="resultsTable">
            <thead>
                <tr>
                    <th>Source URL</th>
                    <th>Target URL</th>
                    <th>Suggested Anchor Text (Placeholder)</th>
                    <th>Link HTML</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
        <p id="noResults" style="margin-top: 15px; color: #888; text-align: center;">No links generated yet. Enter URLs above and click 'Generate Links'.</p>
    </div>

    <script>
        let csvData = ''; 

        // Helper function to extract a simple, capitalized anchor text from the URL path
        function extractSlug(url) {
            try {
                const urlObj = new URL(url);
                let path = urlObj.pathname.replace(/^\/|\/$/g, '');
                
                const segments = path.split('/');
                if (segments.length > 0 && segments[segments.length - 1] !== '') {
                    path = segments[segments.length - 1];
                } else if (segments.length > 1 && segments[segments.length - 2] !== '') {
                    path = segments[segments.length - 2];
                } else {
                    return 'Link';
                }

                // Clean up the slug: replace hyphens with spaces, remove file extensions, Capitalize words
                return path.replace(/-/g, ' ').replace(/\.[^/.]+$/, '')
                           .split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')
                           || 'Link';
            } catch (e) {
                return 'Link'; 
            }
        }

        // Main function to generate the link pairs
        function generateLinks() {
            const input = document.getElementById('urlInput').value;
            const statusMessage = document.getElementById('statusMessage');
            const resultsBody = document.querySelector('#resultsTable tbody');
            const noResults = document.getElementById('noResults');
            const copyBtn = document.getElementById('copyCsvBtn');
            
            // 1. Clean and filter URLs (must start with http:// or https://)
            const urls = input.split('\n')
                              .map(url => url.trim())
                              .filter(url => url.length > 0 && (url.startsWith('http://') || url.startsWith('https://')));

            // Reset UI elements
            resultsBody.innerHTML = '';
            csvData = '';
            statusMessage.style.display = 'none';
            copyBtn.style.display = 'none';
            noResults.style.display = 'block';

            if (urls.length < 2) {
                statusMessage.textContent = 'Please enter at least two valid URLs (starting with http:// or https://) to generate links.';
                statusMessage.style.backgroundColor = '#ffe0b2';
                statusMessage.style.borderColor = '#ff9800';
                statusMessage.style.display = 'block';
                return;
            }

            // 2. Set CSV Header
            const headers = ["Source URL", "Target URL", "Suggested Anchor Text (Placeholder)", "Link HTML"];
            csvData = headers.join(',') + '\n';
            
            let totalLinks = 0;

            // 3. Loop to generate bidirectional pairs
            for (let i = 0; i < urls.length; i++) {
                for (let j = 0; j < urls.length; j++) {
                    // Skip linking a URL to itself
                    if (i === j) continue;

                    const sourceUrl = urls[i];
                    const targetUrl = urls[j];
                    
                    const suggestedAnchor = extractSlug(targetUrl);
                    const linkHtml = `<a href="${targetUrl}">${suggestedAnchor}</a>`;

                    // Create Table Row
                    const row = resultsBody.insertRow();
                    row.insertCell().textContent = sourceUrl;
                    row.insertCell().textContent = targetUrl;
                    row.insertCell().textContent = suggestedAnchor;
                    row.insertCell().textContent = linkHtml;

                    // Append to CSV data (handling internal quotes and wrapping fields)
                    const csvRow = [
                        `"${sourceUrl.replace(/"/g, '""')}"`,
                        `"${targetUrl.replace(/"/g, '""')}"`,
                        `"${suggestedAnchor.replace(/"/g, '""')}"`,
                        `"${linkHtml.replace(/"/g, '""')}"`
                    ].join(',');
                    csvData += csvRow + '\n';
                    
                    totalLinks++;
                }
            }
            
            // 4. Update status
            noResults.style.display = 'none';
            copyBtn.style.display = 'inline-block';
            statusMessage.textContent = `Success! Generated ${totalLinks} bidirectional link rows. Copy the CSV data below.`;
            statusMessage.style.backgroundColor = '#d4edda';
            statusMessage.style.borderColor = '#28a745';
            statusMessage.style.display = 'block';
        }

        // Function to copy the generated CSV data to the clipboard
        function copyCsv() {
            if (!csvData) {
                alert("No data to copy. Click 'Generate Links' first.");
                return;
            }

            navigator.clipboard.writeText(csvData)
                .then(() => {
                    const statusMessage = document.getElementById('statusMessage');
                    statusMessage.textContent = 'CSV data copied to clipboard! Paste it directly into Google Sheets or Excel.';
                    statusMessage.style.backgroundColor = '#c8e6c9'; 
                    statusMessage.style.borderColor = '#4CAF50';
                    statusMessage.style.display = 'block';
                })
                .catch(err => {
                    alert('Could not copy text: ' + err + '\n\nPlease ensure your browser allows clipboard access or try copying manually from the table.');
                });
        }
    </script>

</body>
</html>
